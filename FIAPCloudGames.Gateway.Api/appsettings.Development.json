{
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft.AspNetCore": "Warning"
        }
    },
    "ConnectionStrings": {
        "Auth": "Host=194.163.191.9;Port=5436;User Id=postgres;Password=postgres;Database=fgc_auth;"
    },
    "AllowedHosts": "*",
    "Jwt": {
        "Secret": "super-duper-secret-value-that-should-be-in-user-secrets",
        "Issuer": "fiap-cloud-games",
        "Audience": "developers",
        "ExpirationInMinutes": 15
    },
    "ReverseProxy": {
        "Routes": {
            "users-login-route": {
                "ClusterId": "users-cluster",
                "Match": {
                    "Path": "/users/login"
                },
                "Transforms": [
                    { "PathPattern": "/users/login" }
                ],
                "AuthorizationPolicy": "anonymous"
            },
            "users-register-route": {
                "ClusterId": "users-cluster",
                "Match": {
                    "Path": "/users/register"
                },
                "Transforms": [
                    { "PathPattern": "/users/register" }
                ],
                "AuthorizationPolicy": "anonymous"
            },
            "users-route": {
                "ClusterId": "users-cluster",
                "Match": {
                    "Path": "/users/{**catch-all}"
                },
                "Transforms": [
                    {
                        "PathPattern": "/users/{**catch-all}"
                    }
                ],
                "AuthorizationPolicy": "default"
            },
            "orders-update-status-route": {
                "ClusterId": "orders-cluster",
                "Match": {
                    "Path": "/orders/{orderId:guid}/status",
                    "Methods": [ "PUT" ]
                },
                "AuthorizationPolicy": "AdminOnly"
            },
            "orders-route": {
                "ClusterId": "orders-cluster",
                "Match": {
                    "Path": "/orders/{**catch-all}"
                },
                "Transforms": [
                    { "PathPattern": "/orders/{**catch-all}" },
                    { "RequestHeadersCopy": true }
                ],
                "AuthorizationPolicy": "default"
            },
            "games-route": {
                "ClusterId": "games-cluster",
                "Match": {
                    "Path": "/games/{**catch-all}",
                    "Methods": [ "GET" ]
                },
                "Transforms": [
                    {
                        "PathPattern": "/games/{**catch-all}"
                    }
                ],

                "AuthorizationPolicy": "anonymous"
            },
            "games-admin-route": {
                "ClusterId": "games-cluster",
                "Match": {
                    "Path": "games/{**catch-all}",
                    "Methods": [ "POST", "PUT", "DELETE" ]
                },
                "AuthorizationPolicy": "AdminOnly",
                "Transforms": [
                    { "PathPattern": "{**catch-all}" }
                ]
            }
        },
        "Clusters": {
            "users-cluster": {
                "Destinations": {
                    "destination1": {
                        "Address": "http://fiapcloudgames-users-api.fgc.svc.cluster.local:80/"
                    }
                }
            },
            "orders-cluster": {
                "Destinations": {
                    "destination1": {
                        "Address": "http://fiapcloudgames-orders-api.fgc.svc.cluster.local:80/"
                    }
                }
            },
            "games-cluster": {
                "Destinations": {
                    "destination1": {
                        "Address": "http://fiapcloudgames-games-api.fgc.svc.cluster.local:80/"
                    }
                }
            }
        }
    }
}
